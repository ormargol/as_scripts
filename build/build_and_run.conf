export PERFORM_FR_BUILD=false
export PERFORM_FR_DEPLOY=false
export PERFORM_AIR4G_BUILD=false
export PERFORM_AIR4G_DEPLOY=false
export PERFORM_VER_BUILD=true
export PERFORM_VER_DEPLOY=false
export MAKEVER_PERFORM_BSP_BUILD=yes
export MAKEVER_PERFORM_ENC2_BUILD=yes
export MAKEVER_PERFORM_ENODEB_MAKE_CLEAN=yes
export MAKEVER_PERFORM_ENODEB_MAKE_FSMTDD=yes
export MAKEVER_PERFORM_ENODEB_MAKE_FSMFDD=yes
export MAKEVER_PERFORM_ENODEB_MAKE_XLPTDD=yes
export MAKEVER_PERFORM_ENODEB_MAKE_XLPFDD=yes
export SW_PATH=/home/omargaliot/shared/omargaliot_workspace/Software
export LOGS_PATH=/home/omargaliot
export LOCAL_SSH_PRIVATE_KEY_PATH=/home/omargaliot/.ssh/id_rsa
export FR_BRANCH=FR6.4.1
export AIR4G_BRANCH=sr15.50
export SETUP_IP=192.168.12.195
export SETUP_USER=admin
export SETUP_PASSWORD=HeWGEUx66m=_4!ND
export FR_DEPLOY_KRAITIMAGES_P4_CL=164219
export VER_BUILD_NUM_BUILD_ADDITION=1000
export VER_DEPLOY_TFTP_IP=192.168.10.129
export AIR4G_DEPLOY_MIDDLE_PATH=/home/admin/auto_upgrade
export AIR4G_DEPLOY_SOURCE_DIR=arm_e2e_ms



export FR_PATH=$SW_PATH/Infrastructure/Qualcomm/FSM/QCReleases/current/branches/\
$FR_BRANCH
export FR_BUILD_SCRIPTS_PATH=$SW_PATH/Infrastructure/Qualcomm/FSM/scripts
export FR_BUILD_LOG_PATH=$LOGS_PATH/build_$FR_BRANCH.log
export FR_BUILD_VER_PRODUCT=`echo $FR_BRANCH | sed 's/^..//' | cut -d '.' -f 1`
export FR_BUILD_VER_MAJOR=`echo $FR_BRANCH | sed 's/^..//' | cut -d '.' -f 2`
export FR_BUILD_VER_MINOR=`echo $FR_BRANCH | sed 's/^..//' | cut -d '.' -f 3`
if [ -z $(find $FR_PATH -maxdepth 1 -name builds) ]; then
    export FR_BUILD_VER_BUILD=1000
else
    export FR_BUILD_VER_BUILD=`ls $FR_PATH/builds | xargs -L 1 printf "%s\n" | \
cut -d '_' -f 4 | cut -c 1-4 | sort -rn | head -1 | xargs printf "%s+1\n" | \
bc`
fi
export FR_BUILD_VERSION=$FR_BUILD_VER_PRODUCT"_"$FR_BUILD_VER_MAJOR"_"\
$FR_BUILD_VER_MINOR"_"$FR_BUILD_VER_BUILD
export FR_DEPLOY_VER_PRODUCT=$FR_BUILD_VER_PRODUCT
export FR_DEPLOY_VER_MAJOR=$FR_BUILD_VER_MAJOR
export FR_DEPLOY_VER_MINOR=$FR_BUILD_VER_MINOR
if $PERFORM_FR_BUILD; then
    export FR_DEPLOY_VER_BUILD=$FR_BUILD_VER_BUILD
else
    if [ -z $(find $FR_PATH -maxdepth 1 -name builds) ]; then
        echo "Error! can't deploy FR since there is no build one!"
        exit 1
    else
        export FR_DEPLOY_VER_BUILD=`ls $FR_PATH/builds | xargs -L 1 printf "%s\n" | \
cut -d '_' -f 4 | cut -c 1-4 | sort -rn | head -1`
    fi
fi
export FR_DEPLOY_VERSION=$FR_DEPLOY_VER_PRODUCT"_"$FR_DEPLOY_VER_MAJOR"_"\
$FR_DEPLOY_VER_MINOR"_"$FR_DEPLOY_VER_BUILD
export FR_DEPLOY_KRAITIMAGES_TARGET=$SW_PATH/air4g/branches/$AIR4G_BRANCH/kraitimages/
export FR_DEPLOY_SOURCE=$FR_PATH/builds/$FR_DEPLOY_VERSION
export AIR4G_PATH=$SW_PATH/air4g/branches/$AIR4G_BRANCH
export AIR4G_BUILD_PATH=$AIR4G_PATH/app/build
export AIR4G_BUILD_LOG_PATH=$LOGS_PATH/build_$AIR4G_BRANCH.log
export AIR4G_DEPLOY_SOURCE_PATH=$AIR4G_PATH/app/obj/$AIR4G_DEPLOY_SOURCE_DIR
export VER_BUILD_HISTORY_NUM_TAG=$(cd $AIR4G_PATH && p4 changes -u buildmachine $AIR4G_PATH/...@$(p4 cstat $AIR4G_PATH/...#have | grep change | awk '$3 > x { x = $3 }; END { print x }') -s submitted | grep -v swbuildphy1 | head -1 | cut -d " " -f 7 | cut -c 2-)
#export VER_BUILD_HISTORY_NUM_TAG=14_16_00_204
export VER_BUILD_HISTORY_NUM_MAJOR=`echo $VER_BUILD_HISTORY_NUM_TAG | cut -d "_" -f 2`
export VER_BUILD_HISTORY_NUM_MINOR=`echo $VER_BUILD_HISTORY_NUM_TAG | cut -d "_" -f 3`
export VER_BUILD_HISTORY_NUM_BUILD=`echo $VER_BUILD_HISTORY_NUM_TAG | cut -d "_" -f 4`
export VER_BUILD_NUM_BUILD=`echo $VER_BUILD_HISTORY_NUM_BUILD+$VER_BUILD_NUM_BUILD_ADDITION | bc`
export VER_BUILD_NUM_MINOR=$VER_BUILD_HISTORY_NUM_MINOR
export VER_BUILD_NUM_MAJOR=$VER_BUILD_HISTORY_NUM_MAJOR
export VER_BUILD_NUM_TAG="14_"$VER_BUILD_NUM_MAJOR"_"$VER_BUILD_NUM_MINOR"_"$VER_BUILD_NUM_BUILD
export VER_BUILD_TARGET_PATH=$AIR4G_PATH/target
export VER_BUILD_LOG_PATH=$LOGS_PATH/build_$VER_BUILD_NUM_TAG.log
